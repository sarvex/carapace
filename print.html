<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js mocha">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>carapace</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="asciinema/asciinema-player.css">
        <link rel="stylesheet" href="./theme/catppuccin.css">
        <link rel="stylesheet" href="./theme/catppuccin-highlight.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "mocha";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('mocha')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="carapace.html"><strong aria-hidden="true">1.</strong> carapace</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/gen.html"><strong aria-hidden="true">1.1.</strong> Gen</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/gen/hiddenSubcommand.html"><strong aria-hidden="true">1.1.1.</strong> Hidden Subcommand</a></li><li class="chapter-item expanded "><a href="carapace/gen/positionalCompletion.html"><strong aria-hidden="true">1.1.2.</strong> PositionalCompletion</a></li><li class="chapter-item expanded "><a href="carapace/gen/flagCompletion.html"><strong aria-hidden="true">1.1.3.</strong> FlagCompletion</a></li><li class="chapter-item expanded "><a href="carapace/gen/dashCompletion.html"><strong aria-hidden="true">1.1.4.</strong> DashCompletion</a></li></ol></li><li class="chapter-item expanded "><a href="carapace/defaultActions.html"><strong aria-hidden="true">1.2.</strong> DefaultActions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/defaultActions/actionValues.html"><strong aria-hidden="true">1.2.1.</strong> ActionValues</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionValuesDescribed.html"><strong aria-hidden="true">1.2.2.</strong> ActionValuesDescribed</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionStyledValues.html"><strong aria-hidden="true">1.2.3.</strong> ActionStyledValues</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionStyledValuesDescribed.html"><strong aria-hidden="true">1.2.4.</strong> ActionStyledValuesDescribed</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionFiles.html"><strong aria-hidden="true">1.2.5.</strong> ActionFiles</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionDirectories.html"><strong aria-hidden="true">1.2.6.</strong> ActionDirectories</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionExecutables.html"><strong aria-hidden="true">1.2.7.</strong> ActionExecutables</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionMessage.html"><strong aria-hidden="true">1.2.8.</strong> ActionMessage</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionCallback.html"><strong aria-hidden="true">1.2.9.</strong> ActionCallback</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionMultiParts.html"><strong aria-hidden="true">1.2.10.</strong> ActionMultiParts</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionExecCommand.html"><strong aria-hidden="true">1.2.11.</strong> ActionExecCommand</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionExecute.html"><strong aria-hidden="true">1.2.12.</strong> ActionExecute</a></li><li class="chapter-item expanded "><a href="carapace/defaultActions/actionImport.html"><strong aria-hidden="true">1.2.13.</strong> ActionImport</a></li></ol></li><li class="chapter-item expanded "><a href="carapace/action.html"><strong aria-hidden="true">1.3.</strong> Action</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/action/custom.html"><strong aria-hidden="true">1.3.1.</strong> Custom</a></li><li class="chapter-item expanded "><a href="carapace/action/chDir.html"><strong aria-hidden="true">1.3.2.</strong> Chdir</a></li><li class="chapter-item expanded "><a href="carapace/action/invoke.html"><strong aria-hidden="true">1.3.3.</strong> Invoke</a></li><li class="chapter-item expanded "><a href="carapace/action/noSpace.html"><strong aria-hidden="true">1.3.4.</strong> NoSpace</a></li><li class="chapter-item expanded "><a href="carapace/action/suppress.html"><strong aria-hidden="true">1.3.5.</strong> Suppress</a></li><li class="chapter-item expanded "><a href="carapace/action/style.html"><strong aria-hidden="true">1.3.6.</strong> Style</a></li><li class="chapter-item expanded "><a href="carapace/action/tag.html"><strong aria-hidden="true">1.3.7.</strong> Tag</a></li><li class="chapter-item expanded "><a href="carapace/action/timeout.html"><strong aria-hidden="true">1.3.8.</strong> Timeout</a></li><li class="chapter-item expanded "><a href="carapace/action/usage.html"><strong aria-hidden="true">1.3.9.</strong> Usage</a></li></ol></li><li class="chapter-item expanded "><a href="carapace/invokedAction.html"><strong aria-hidden="true">1.4.</strong> InvokedAction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/invokedAction/filter.html"><strong aria-hidden="true">1.4.1.</strong> Filter</a></li><li class="chapter-item expanded "><a href="carapace/invokedAction/merge.html"><strong aria-hidden="true">1.4.2.</strong> Merge</a></li><li class="chapter-item expanded "><a href="carapace/invokedAction/prefix.html"><strong aria-hidden="true">1.4.3.</strong> Prefix</a></li><li class="chapter-item expanded "><a href="carapace/invokedAction/suffix.html"><strong aria-hidden="true">1.4.4.</strong> Suffix</a></li><li class="chapter-item expanded "><a href="carapace/invokedAction/toA.html"><strong aria-hidden="true">1.4.5.</strong> ToA</a></li><li class="chapter-item expanded "><a href="carapace/invokedAction/toMultiPartsA.html"><strong aria-hidden="true">1.4.6.</strong> ToMultiPartsA</a></li></ol></li><li class="chapter-item expanded "><a href="carapace/batch.html"><strong aria-hidden="true">1.5.</strong> Batch</a></li><li class="chapter-item expanded "><a href="carapace/cache.html"><strong aria-hidden="true">1.6.</strong> Cache</a></li><li class="chapter-item expanded "><a href="carapace/export.html"><strong aria-hidden="true">1.7.</strong> Export</a></li><li class="chapter-item expanded "><a href="carapace/standalone.html"><strong aria-hidden="true">1.8.</strong> Standalone</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="carapace/standalone/caraparse.html"><strong aria-hidden="true">1.8.1.</strong> caraparse</a></li><li class="chapter-item expanded "><a href="carapace/standalone/pflag.html"><strong aria-hidden="true">1.8.2.</strong> pflag</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="development.html"><strong aria-hidden="true">2.</strong> development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development/additionalInformation.html"><strong aria-hidden="true">2.1.</strong> Additional Information</a></li><li class="chapter-item expanded "><a href="development/shells.html"><strong aria-hidden="true">2.2.</strong> Shells</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="development/shells/bash.html"><strong aria-hidden="true">2.2.1.</strong> Bash</a></li><li class="chapter-item expanded "><a href="development/shells/elvish.html"><strong aria-hidden="true">2.2.2.</strong> Elvish</a></li><li class="chapter-item expanded "><a href="development/shells/fish.html"><strong aria-hidden="true">2.2.3.</strong> Fish</a></li><li class="chapter-item expanded "><a href="development/shells/ion.html"><strong aria-hidden="true">2.2.4.</strong> Ion</a></li><li class="chapter-item expanded "><a href="development/shells/nushell.html"><strong aria-hidden="true">2.2.5.</strong> Nushell</a></li><li class="chapter-item expanded "><a href="development/shells/oil.html"><strong aria-hidden="true">2.2.6.</strong> Oil</a></li><li class="chapter-item expanded "><a href="development/shells/powershell.html"><strong aria-hidden="true">2.2.7.</strong> Powershell</a></li><li class="chapter-item expanded "><a href="development/shells/tcsh.html"><strong aria-hidden="true">2.2.8.</strong> Tcsh</a></li><li class="chapter-item expanded "><a href="development/shells/xonsh.html"><strong aria-hidden="true">2.2.9.</strong> Xonsh</a></li><li class="chapter-item expanded "><a href="development/shells/zsh.html"><strong aria-hidden="true">2.2.10.</strong> Zsh</a></li></ol></li><li class="chapter-item expanded "><a href="development/testing.html"><strong aria-hidden="true">2.3.</strong> Testing</a></li><li class="chapter-item expanded "><a href="development/asciinema.html"><strong aria-hidden="true">2.4.</strong> Asciinema</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frapp√©</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">carapace</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rsteube/carapace" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="carapace"><a class="header" href="#carapace">carapace</a></h1>
<p><a href="https://github.com/rsteube/carapace">carapace</a> is a command-line completion generator for <a href="https://github.com/spf13/cobra">spf13/cobra</a> with support for:</p>
<ul>
<li><a href="https://www.gnu.org/software/bash/">Bash</a></li>
<li><a href="https://elv.sh/">Elvish</a></li>
<li><a href="https://fishshell.com/">Fish</a></li>
<li><a href="https://doc.redox-os.org/ion-manual/">Ion</a> (<a href="https://github.com/rsteube/carapace/issues/88">experimental</a>)</li>
<li><a href="https://www.nushell.sh/">Nushell</a></li>
<li><a href="http://www.oilshell.org/">Oil</a></li>
<li><a href="https://microsoft.com/powershell">Powershell</a></li>
<li><a href="https://xon.sh/">Xonsh</a></li>
<li><a href="https://www.zsh.org/">Zsh</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gen"><a class="header" href="#gen">Gen</a></h1>
<p>Calling <a href="https://pkg.go.dev/github.com/rsteube/carapace#Gen"><code>Gen</code></a> on the root command is sufficient to enable completion script generation using the <a href="carapace/./gen/hiddenSubcommand.html">hidden subcommand</a>.</p>
<pre><code class="language-go">import (
    &quot;github.com/rsteube/carapace&quot;
)

carapace.Gen(rootCmd)
</code></pre>
<p>Additionally invoke <a href="https://pkg.go.dev/github.com/rsteube/carapace#Test"><code>carapace.Test</code></a> in a <a href="https://golang.org/doc/tutorial/add-a-test">test</a> to verify configuration during build time.</p>
<pre><code class="language-go">func TestCarapace(t *testing.T) {
    carapace.Test(t)
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hidden-subcommand"><a class="header" href="#hidden-subcommand">Hidden Subcommand</a></h1>
<p>When <a href="https://pkg.go.dev/github.com/rsteube/carapace#Gen"><code>Gen</code></a> is invoked a hidden subcommand (<code>_carapace</code>) is added. This handles completion script generation and <a href="carapace/gen/../defaultActions/actionCallback.html">callbacks</a>.</p>
<h2 id="completion"><a class="header" href="#completion">Completion</a></h2>
<p><code>SHELL</code> is optional and will be detected by parent process name.</p>
<pre><code class="language-sh">command _carapace [SHELL]
</code></pre>
<pre><code class="language-sh"># bash
source &lt;(command _carapace)

# elvish
eval (command _carapace | slurp)

# fish
command _carapace | source

# nushell (update config.nu according to output)
command _carapace nushell

# oil
source &lt;(command _carapace)

# powershell
Set-PSReadLineOption -Colors @{ &quot;Selection&quot; = &quot;`e[7m&quot; }
Set-PSReadlineKeyHandler -Key Tab -Function MenuComplete
command _carapace | Out-String | Invoke-Expression

# tcsh
set autolist
eval `command _carapace tcsh`

# xonsh
COMPLETIONS_CONFIRM=True
exec($(command _carapace))

# zsh
source &lt;(command _carapace)
</code></pre>
<blockquote>
<p>Directly sourcing multiple completions in your shell init script increases startup time <a href="https://medium.com/@jzelinskie/please-dont-ship-binaries-with-shell-completion-as-commands-a8b1bcb8a0d0">considerably</a>. See <a href="https://github.com/rsteube/lazycomplete">lazycomplete</a> for a solution to this problem.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="positionalcompletion"><a class="header" href="#positionalcompletion">PositionalCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.PositionalCompletion"><code>PositionalCompletion</code></a> defines completion for positional arguments using a list of <a href="carapace/gen/../action.html">actions</a>.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PositionalCompletion(
    carapace.ActionValues(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),
    // ...
)
</code></pre>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.PositionalAnyCompletion"><code>PositionalAnyCompletion</code></a> defines completion for any positional argument not already defined.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).PositionalAnyCompletion(
    carapace.ActionFiles(),
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flagcompletion"><a class="header" href="#flagcompletion">FlagCompletion</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.FlagCompletion"><code>FlagCompletion</code></a> defines completion for flags using a map consisting of name and <a href="carapace/gen/../action.html">action</a>.</p>
<pre><code class="language-go">carapace.Gen(myCmd).FlagCompletion(carapace.ActionMap{
    &quot;flagName&quot;: carapace.ActionValues(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),
    // ...
})
</code></pre>
<h2 id="optional-argument"><a class="header" href="#optional-argument">Optional argument</a></h2>
<p>To mark a flag argument as optional (<code>--name=value</code>) the <a href="https://pkg.go.dev/github.com/spf13/pflag#Flag"><code>NoOptDefVal</code></a> needs to be set to anything other than empty string.</p>
<pre><code class="language-go">rootCmd.Flag(&quot;optarg&quot;).NoOptDefVal = &quot; &quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dashcompletion"><a class="header" href="#dashcompletion">DashCompletion</a></h1>
<p>The first <code>--</code> (dash) argument that is not a flag argumet disables further flag parsing.
In carapace the positional arguments that follow it are completed using the following functions.
The Context is also updated to only contain the arguments after the dash.</p>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.DashCompletion"><code>DashCompletion</code></a> defines completion for positional arguments after dash using a list of <a href="carapace/gen/../action.html">actions</a>.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).DashCompletion(
    carapace.ActionValues(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),
    // ...
)
</code></pre>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.DashAnyCompletion"><code>DashAnyCompletion</code></a> defines completion for any positional argument after dash not already defined.</p>
<pre><code class="language-go">carapace.Gen(rootCmd).DashAnyCompletion(
    carapace.ActionFiles(&quot;&quot;),
)
</code></pre>
<h2 id="complete-using-different-command"><a class="header" href="#complete-using-different-command">Complete using different command</a></h2>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Carapace.DashAnyCompletion"><code>DashAnyCompletion</code></a> can be combined with <a href="carapace/gen/../defaultActions/actionExecute.html"><code>ActionExecute</code></a> or <a href="carapace/gen/../defaultActions/actionImport.html"><code>ActionImport</code></a> to complete the arguments after dash with a different completer.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="defaultactions"><a class="header" href="#defaultactions">DefaultActions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionvalues"><a class="header" href="#actionvalues">ActionValues</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionValues"><code>ActionValues</code></a> completes values.</p>
<pre><code class="language-go">carapace.ActionValues(&quot;first&quot;, &quot;second&quot;, &quot;third&quot;)
</code></pre>
<p><img src="carapace/defaultActions/./actionValues.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionvaluesdescribed"><a class="header" href="#actionvaluesdescribed">ActionValuesDescribed</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionValuesDescribed"><code>ActionValuesDescribed</code></a> completes values with a description.</p>
<pre><code class="language-go">carapace.ActionValuesDescribed(
	&quot;first&quot;, &quot;description of first&quot;,
	&quot;second&quot;, &quot;description of second&quot;,
	&quot;third&quot;, &quot;description of third&quot;,
)
</code></pre>
<p><img src="carapace/defaultActions/./actionValuesDescribed.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyledvalues"><a class="header" href="#actionstyledvalues">ActionStyledValues</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionStyledValues"><code>ActionStyledValues</code></a> is like <a href="carapace/defaultActions/./actionValues.html">ActionValues</a> but accepts an additional <a href="https://pkg.go.dev/github.com/rsteube/carapace/pkg/style">style</a>.</p>
<pre><code class="language-go">carapace.ActionStyledValues(
	&quot;first&quot;, style.Default,
	&quot;second&quot;, style.Blue,
	&quot;third&quot;, style.Of(style.BgBrightBlack, style.Magenta, style.Bold),
)
</code></pre>
<p><img src="carapace/defaultActions/./actionStyledValues.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionstyledvaluesdescribed"><a class="header" href="#actionstyledvaluesdescribed">ActionStyledValuesDescribed</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionStyledValuesDescribed"><code>ActionStyledValuesDescribed</code></a> is like <a href="carapace/defaultActions/./actionValuesDescribed.html">ActionValuesDescribed</a> but accepts an additional <a href="https://pkg.go.dev/github.com/rsteube/carapace/pkg/style">style</a>.</p>
<pre><code class="language-go">carapace.ActionStyledValuesDescribed(
	&quot;first&quot;, &quot;description of first&quot;, style.Blink,
	&quot;second&quot;, &quot;description of second&quot;, style.Of(&quot;color210&quot;, style.Underlined),
	&quot;third&quot;, &quot;description of third&quot;, style.Of(&quot;#112233&quot;, style.Italic),
)
</code></pre>
<p><img src="carapace/defaultActions/./actionStyledValuesDescribed.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionfiles"><a class="header" href="#actionfiles">ActionFiles</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionFiles"><code>ActionFiles</code></a> completes files with optional suffix filtering.</p>
<pre><code class="language-go">// all files
carapace.ActionFiles()

// files ending with `.md`, `go.mod` or `go.sum`
carapace.ActionFiles(&quot;.md&quot;, &quot;go.mod&quot;, &quot;go.sum&quot;),
</code></pre>
<p><img src="carapace/defaultActions/./actionFiles.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actiondirectories"><a class="header" href="#actiondirectories">ActionDirectories</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionDirectories"><code>ActionDirectories</code></a> completes directories.</p>
<pre><code class="language-go">carapace.ActionDirectories()
</code></pre>
<p><img src="carapace/defaultActions/./actionDirectories.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexecutables"><a class="header" href="#actionexecutables">ActionExecutables</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionExecutables"><code>ActionExecutables</code></a> completes <a href="https://en.wikipedia.org/wiki/PATH_(variable)">PATH</a> executables.</p>
<pre><code class="language-go">carapace.ActionExecutables()
</code></pre>
<p><img src="carapace/defaultActions/./actionExecutables.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionmessage"><a class="header" href="#actionmessage">ActionMessage</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionMessage"><code>ActionMessage</code></a> shows an error message.</p>
<pre><code class="language-go">carapace.ActionMessage(&quot;example message&quot;)
</code></pre>
<blockquote>
<p>To display the message <a href="carapace/defaultActions/./actionValuesDescribed.html">ActionValuesDescribed</a> is used with values <code>_</code>, <code>ERR</code> and the message as description.</p>
</blockquote>
<p><img src="carapace/defaultActions/./actionMessage.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actioncallback"><a class="header" href="#actioncallback">ActionCallback</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionCallback"><code>ActionCallback</code></a> completes values with given function.
It is invoked after the arguments are parsed which enables contextual completion.</p>
<blockquote>
<p>All <a href="carapace/defaultActions/../defaultActions.html">DefaultActions</a> are implicitly wrapped in an <a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionCallback"><code>ActionCallback</code></a> for performance.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	if flag := actionCmd.Flag(&quot;values&quot;); flag.Changed {
		return carapace.ActionMessage(&quot;values flag is set to: '%v'&quot;, flag.Value.String())
	}
	return carapace.ActionMessage(&quot;values flag is not set&quot;)
})
</code></pre>
<ul>
<li><code>c.Value</code> provides access to the current (partial) value of the flag or positional argument being completed</li>
<li>return <a href="carapace/defaultActions/./actionValues.html">ActionValues</a> without arguments to silently skip completion</li>
<li>return <a href="carapace/defaultActions/./actionMessage.html">ActionMessage</a> to provide an error message (e.g. failure during invocation of an external command)</li>
<li><code>c.Args</code> provides access to the positional arguments of the current subcommand (excluding the one currently being completed)</li>
</ul>
<p><img src="carapace/defaultActions/./actionCallback.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionmultiparts"><a class="header" href="#actionmultiparts">ActionMultiParts</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionMultiParts"><code>ActionMultiParts</code></a> completes parts of an argument separately (e.g. <code>user:group</code> from chown).
For this the <code>Context.Value</code> is split with given divider and then updated to only contain the currently completed part.
<code>Context.Parts</code> contains the preceding parts and can be used in a <code>switch</code> statement to return the corresponding <a href="carapace/defaultActions/../action.html">Action</a>.</p>
<blockquote>
<p>An empty divider splits per character, but be aware that fish will add space suffix for anything other than <code>/=@:.,</code>.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionMultiParts(&quot;:&quot;, func(c carapace.Context) carapace.Action {
	switch len(c.Parts) {
	case 0:
		return carapace.ActionValues(&quot;userA&quot;, &quot;UserB&quot;).Invoke(c).Suffix(&quot;:&quot;).ToA()
	case 1:
		return carapace.ActionValues(&quot;groupA&quot;, &quot;groupB&quot;)
	default:
		return carapace.ActionValues()
	}
})
</code></pre>
<ul>
<li>Values <strong>must not</strong> contain the separator as a simple <code>strings.Split()</code> is used to separate the parts.</li>
<li>It is however <strong>allowed as suffix</strong> to enable fluent tab completion (like <code>/</code> for a directory).</li>
<li>The divider is implicitly added to <a href="carapace/defaultActions/../action/noSpace.html"><code>NoSpace</code></a></li>
<li>If no suffix is added <a href="carapace/defaultActions/../action/noSpace.html"><code>NoSpace</code></a> can be used in the preceding parts to prevent a space suffix.</li>
</ul>
<p><img src="carapace/defaultActions/./actionMultiParts.cast" alt="" /></p>
<h2 id="nesting"><a class="header" href="#nesting">Nesting</a></h2>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionMultiParts"><code>ActionMultiParts</code></a> can be nested as well, e.g. completing multiple <code>KEY=VALUE</code> pairs separated by <code>,</code>.</p>
<pre><code class="language-go">carapace.ActionMultiParts(&quot;,&quot;, func(cEntries carapace.Context) carapace.Action {
	return carapace.ActionMultiParts(&quot;=&quot;, func(c carapace.Context) carapace.Action {
		switch len(c.Parts) {
		case 0:
			keys := make([]string, len(cEntries.Parts))
			for index, entry := range cEntries.Parts {
				keys[index] = strings.Split(entry, &quot;=&quot;)[0]
			}
			return carapace.ActionValues(&quot;FILE&quot;, &quot;DIRECTORY&quot;, &quot;VALUE&quot;).Invoke(c).Filter(keys).Suffix(&quot;=&quot;).ToA()
		case 1:
			switch c.Parts[0] {
			case &quot;FILE&quot;:
				return carapace.ActionFiles(&quot;&quot;).NoSpace()
			case &quot;DIRECTORY&quot;:
				return carapace.ActionDirectories().NoSpace()
			case &quot;VALUE&quot;:
				return carapace.ActionValues(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;).NoSpace()
			default:
				return carapace.ActionValues()

			}
		default:
			return carapace.ActionValues()
		}
	})
})
</code></pre>
<p><img src="carapace/defaultActions/./actionMultiParts-nested.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexeccommand"><a class="header" href="#actionexeccommand">ActionExecCommand</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionExecCommand"><code>ActionExecCommand</code></a> executes given command and transforms its output using the provided function. If an error occurs during execution <a href="carapace/defaultActions/./actionMessage.html">ActionMessage</a> is returned instead with the first line of <code>stderr</code> or an exit code.</p>
<pre><code class="language-go">carapace.ActionExecCommand(&quot;git&quot;, &quot;remote&quot;)(func(output []byte) carapace.Action {
	lines := strings.Split(string(output), &quot;\n&quot;)
	return carapace.ActionValues(lines[:len(lines)-1]...)
})
</code></pre>
<p><img src="carapace/defaultActions/./actionExecCommand.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionexecute"><a class="header" href="#actionexecute">ActionExecute</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionExecute"><code>ActionExecute</code></a> invokes an internal command and parses it's output using <a href="carapace/defaultActions/../defaultActions/actionImport.html"><code>ActionImport</code></a>.</p>
<blockquote>
<p>Cobra commands can only be executed <strong>once</strong> so be sure each invocation uses a new instance.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	cmd := &amp;cobra.Command{
		Use: &quot;embedded&quot;,
		CompletionOptions: cobra.CompletionOptions{
			DisableDefaultCmd: true,
		},
		Run: func(cmd *cobra.Command, args []string) {},
	}

	cmd.Flags().Bool(&quot;embedded-flag&quot;, false, &quot;embedded flag&quot;)

	carapace.Gen(cmd).PositionalCompletion(
		carapace.ActionValues(&quot;embeddedPositional1&quot;, &quot;embeddedP1&quot;),
		carapace.ActionValues(&quot;embeddedPositional2&quot;, &quot;embeddedP2&quot;),
	)

	return carapace.ActionExecute(cmd)
})
</code></pre>
<p><img src="carapace/defaultActions/./actionExecute.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="actionimport"><a class="header" href="#actionimport">ActionImport</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#ActionImport"><code>ActionImport</code></a> parses the json generated by <a href="carapace/defaultActions/../export.html">Export</a> and imports it as <a href="carapace/defaultActions/../action.html">Action</a>.</p>
<pre><code class="language-go">carapace.ActionImport([]byte(`
{
  &quot;version&quot;: &quot;unknown&quot;,
  &quot;messages&quot;: [],
  &quot;nospace&quot;: &quot;&quot;,
  &quot;usage&quot;: &quot;&quot;,
  &quot;values&quot;: [
    {
      &quot;value&quot;: &quot;first&quot;,
      &quot;display&quot;: &quot;first&quot;
    },
    {
      &quot;value&quot;: &quot;second&quot;,
      &quot;display&quot;: &quot;second&quot;
    },
    {
      &quot;value&quot;: &quot;third&quot;,
      &quot;display&quot;: &quot;third&quot;
    }
  ]
}
`))
</code></pre>
<p><img src="carapace/defaultActions/./actionImport.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="action"><a class="header" href="#action">Action</a></h1>
<p>An <a href="https://pkg.go.dev/github.com/rsteube/carapace#Action"><code>Action</code></a> indicates how to complete a flag or a positional argument.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom"><a class="header" href="#custom">Custom</a></h1>
<p>Custom Actions can be created by using a function that returns <code>carapace.Action</code>. A range of these can be found at <a href="https://pkg.go.dev/github.com/rsteube/carapace-bin/pkg/actions">carapace-bin</a>.</p>
<pre><code class="language-go">type ExampleOpts struct {
	Static bool
}

//  ActionExample(ExampleOpts{Static: true})
func ActionExample(opts ExampleOpts) carapace.Action {
	return carapace.ActionCallback(func(c carapace.Context) carapace.Action {
		if opts.Static {
			return carapace.ActionValues(&quot;a&quot;, &quot;b&quot;)
		}
		if strings.HasPrefix(c.Value, &quot;file://&quot;) {
			return carapace.ActionFiles().Invoke(c).Prefix(&quot;file://&quot;).ToA()
		}
		return carapace.ActionValues()
	})
}
</code></pre>
<blockquote>
<p>Unless static values are returned the code should be wrapped in a <a href="carapace/action/../defaultActions/actionCallback.html">callback</a> or the code would be executed at program start (and slow it down considerably).
It is also mandatory when accessing the commands flag values as the callback function is invoked after these are parsed.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chdir"><a class="header" href="#chdir">Chdir</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Chdir"><code>Chdir</code></a> changes the current working directory to the named directory during invocation.</p>
<pre><code class="language-go">// completes files for path relative to current wd
carapace.ActionFiles()

// complete files for path relative to `/tmp`
carapace.ActionFiles().Chdir(&quot;/tmp&quot;)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invoke"><a class="header" href="#invoke">Invoke</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Invoke"><code>Invoke</code></a> explicitly executes the <a href="carapace/action/../defaultActions/actionCallback.html">callback</a> of an action if it exists.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nospace"><a class="header" href="#nospace">NoSpace</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suppress"><a class="header" href="#suppress">Suppress</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Suppress"><code>Suppress</code></a> suppresses specific error messages using regular expressions.</p>
<pre><code class="language-go">carapace.Batch(
	docker.ActionContainers(),
	docker.ActionServices().Supress(&quot;This node is not a swarm manager&quot;),
	docker.ActionNetworks(),
	docker.ActionVolumes(),
).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="style"><a class="header" href="#style">Style</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Style"><code>Style</code></a> sets the <a href="https://pkg.go.dev/github.com/rsteube/carapace/pkg/style">style</a> for all values.</p>
<pre><code class="language-go">carapace.ActionValues(
  &quot;first&quot;,
  &quot;second&quot;,
).Style(style.Green)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tag"><a class="header" href="#tag">Tag</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Tag"><code>Tag</code></a> sets the <code>tag</code> for all values. This enables additional grouping and filtering.</p>
<pre><code class="language-go">ActionValues(
  &quot;192.168.1.1&quot;,
  &quot;127.0.0.1&quot;,
).Tag(&quot;interfaces&quot;)
</code></pre>
<h2 id="command-groups"><a class="header" href="#command-groups">Command Groups</a></h2>
<p><a href="https://github.com/spf13/cobra/blob/main/user_guide.md#grouping-commands-in-help">Command Groups</a> are implicitly used as <code>tag</code> for commands.</p>
<pre><code class="language-go">func init() {
	carapace.Gen(rootCmd).Standalone()

	rootCmd.AddGroup(
		&amp;cobra.Group{ID: &quot;main&quot;, Title: &quot;Main Commands&quot;},
		&amp;cobra.Group{ID: &quot;other&quot;, Title: &quot;Other Commands&quot;},
	)
	rootCmd.AddCommand(
		&amp;cobra.Command{Use: &quot;sub1&quot;, GroupID: &quot;main&quot;, Run: func(cmd *cobra.Command, args []string) {}},
		&amp;cobra.Command{Use: &quot;sub2&quot;, GroupID: &quot;main&quot;, Run: func(cmd *cobra.Command, args []string) {}},
		&amp;cobra.Command{Use: &quot;sub3&quot;, GroupID: &quot;other&quot;, Run: func(cmd *cobra.Command, args []string) {}},
		&amp;cobra.Command{Use: &quot;sub4&quot;, GroupID: &quot;other&quot;, Run: func(cmd *cobra.Command, args []string) {}},
		&amp;cobra.Command{Use: &quot;sub5&quot;, Run: func(cmd *cobra.Command, args []string) {}},
	)
}
</code></pre>
<pre><code class="language-json">{
  &quot;Version&quot;: &quot;v0.26.5&quot;,
  &quot;Nospace&quot;: &quot;&quot;,
  &quot;RawValues&quot;: [
    {
      &quot;Value&quot;: &quot;sub1&quot;,
      &quot;Display&quot;: &quot;sub1&quot;,
      &quot;Tag&quot;: &quot;main commands&quot;
    },
    {
      &quot;Value&quot;: &quot;sub2&quot;,
      &quot;Display&quot;: &quot;sub2&quot;,
      &quot;Tag&quot;: &quot;main commands&quot;
    },
    {
      &quot;Value&quot;: &quot;sub3&quot;,
      &quot;Display&quot;: &quot;sub3&quot;,
      &quot;Tag&quot;: &quot;other commands&quot;
    },
    {
      &quot;Value&quot;: &quot;sub4&quot;,
      &quot;Display&quot;: &quot;sub4&quot;,
      &quot;Tag&quot;: &quot;other commands&quot;
    },
    {
      &quot;Value&quot;: &quot;sub5&quot;,
      &quot;Display&quot;: &quot;sub5&quot;,
      &quot;Tag&quot;: &quot;additional commands&quot;
    }
  ]
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="timeout"><a class="header" href="#timeout">Timeout</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Timeout"><code>Timeout</code></a> sets the maximum duration an <a href="carapace/action/../action.html">Action</a> may take to <a href="carapace/action/./invoke.html">invoke</a>.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	time.Sleep(3*time.Second)
	return carapace.ActionValues(&quot;within timeout&quot;)
}).Timeout(2*time.Second, carapace.ActionMessage(&quot;timeout exceeded&quot;))
</code></pre>
<p><img src="carapace/action/./timeout.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usage"><a class="header" href="#usage">Usage</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Usage"><code>Usage</code></a> sets the <code>usage</code> message.</p>
<blockquote>
<p><code>usage</code> is implicitly set by default with <a href="https://pkg.go.dev/github.com/spf13/pflag#Flag"><code>Flag.Usage</code></a> for flag and <a href="https://pkg.go.dev/github.com/spf13/cobra#Command"><code>Command.Use</code></a> for positional arguments.</p>
</blockquote>
<pre><code class="language-go">carapace.ActionValues().Usage(&quot;explicit usage&quot;)
</code></pre>
<pre><code class="language-json">{
  &quot;Version&quot;: &quot;unknown&quot;,
  &quot;Usage&quot;: &quot;explicit usage&quot;,
  &quot;Nospace&quot;: &quot;&quot;,
  &quot;RawValues&quot;: []
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invokedaction"><a class="header" href="#invokedaction">InvokedAction</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction"><code>InvokedAction</code></a> is a logical alias for an <a href="carapace/./action.html">Action</a> whose (nested) callback was <a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Invoke">invoked</a> and thus contains static values (essentially this is now an <a href="carapace/./defaultActions/actionValuesDescribed.html">ActionValuesDescribed</a>).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filter"><a class="header" href="#filter">Filter</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.Filter"><code>Filter</code></a> filters values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.
E.g. completing a unique list of values in an <a href="carapace/invokedAction/../defaultActions/actionMultiParts.html">ActionMultiParts</a>:</p>
<pre><code class="language-go">carapace.ActionMultiParts(&quot;,&quot;, func(c carapace.Context) carapace.Action {
 	return carapace.ActionValues(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;).Invoke(c).Filter(c.Parts).ToA()
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="merge"><a class="header" href="#merge">Merge</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.Merge"><code>Merge</code></a> combines values of multiple <a href="carapace/invokedAction/../invokedAction.html">InvokedActions</a>.</p>
<pre><code class="language-go">carapace.ActionValues(&quot;one&quot;, &quot;two&quot;).Invoke(c).Merge(carapace.ActionValues(&quot;three&quot;, &quot;four&quot;).Invoke(c)).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prefix"><a class="header" href="#prefix">Prefix</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.Prefix"><code>Prefix</code></a> adds a prefix to all values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.</p>
<pre><code class="language-go">carapace.ActionValues(&quot;melon&quot;, &quot;drop&quot;, &quot;fall&quot;).Invoke(c).Prefix(&quot;water&quot;).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suffix"><a class="header" href="#suffix">Suffix</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.Suffix"><code>Suffix</code></a> adds a suffix to all values within an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a>.</p>
<pre><code class="language-go">ActionUsers().Invoke(c).Suffix(&quot;:&quot;).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="toa"><a class="header" href="#toa">ToA</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.ToA"><code>ToA</code></a> casts an <a href="carapace/invokedAction/../invokedAction.html">InvokedAction</a> back to <a href="carapace/invokedAction/../action.html">Action</a>.</p>
<pre><code class="language-go">ActionValues().Invoke(c).ToA()
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tomultipartsa"><a class="header" href="#tomultipartsa">ToMultiPartsA</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#InvokedAction.ToMultiPartsA"><code>ToMultiPartsA</code></a> creates an <a href="carapace/invokedAction/../defaultActions/actionMultiParts.html">ActionMultiParts</a> from values containing a specific separator.
E.g. completing the contents of a zip file (<code>dir/subdir/file</code>) by each path segment separately like <a href="carapace/invokedAction/../defaultActions/actionFiles.html">ActionFiles</a>:</p>
<pre><code class="language-go">func ActionZipFileContents(file string) carapace.Action {
	return carapace.ActionCallback(func(c carapace.Context) carapace.Action {
		if reader, err := zip.OpenReader(file); err != nil {
			return carapace.ActionMessage(err.Error())
		} else {
			defer reader.Close()
			vals := make([]string, len(reader.File))
			for index, f := range reader.File {
				vals[index] = f.Name
			}
			return carapace.ActionValues(vals...).Invoke(c).ToMultiPartsA(&quot;/&quot;)
		}
	})
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="batch"><a class="header" href="#batch">Batch</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Batch"><code>Batch</code></a> bundles <a href="carapace/./defaultActions/actionCallback.html">callback actions</a> so they can be <a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Invoke">invoked</a> in parallel using goroutines.</p>
<pre><code class="language-go">carapace.ActionCallback(func(c carapace.Context) carapace.Action {
	return carapace.Batch(
		carapace.ActionValues(&quot;A&quot;, &quot;B&quot;),
		carapace.ActionValues(&quot;C&quot;, &quot;D&quot;),
		carapace.ActionValues(&quot;E&quot;, &quot;F&quot;),
	).Invoke(c).Merge().ToA()
})
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cache"><a class="header" href="#cache">Cache</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace#Action.Cache"><code>Cache</code></a> provides a simple way to cache <a href="carapace/./defaultActions/actionCallback.html">callback actions</a>.
For this an <a href="carapace/./invokedAction.html">InvokedAction</a> is persisted as <code>json</code> to <a href="https://pkg.go.dev/os#UserCacheDir"><code>os.UserCacheDir</code></a> (see <a href="carapace/./export.html">Export</a>):</p>
<pre><code class="language-handlebars">{{cacheDir}}/carapace/{{username}}/{{binary}}/{{callerChecksum}}/{{cacheChecksum}}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>ID</th><th>x</th><th>example</th></tr></thead><tbody>
<tr><td>cacheDir</td><td>os.UserCacheDir</td><td><code>~/.cache/</code></td></tr>
<tr><td>username</td><td>current user</td><td><code>root</code></td></tr>
<tr><td>binary</td><td>binary name</td><td><code>carapace</code></td></tr>
<tr><td>callerChecksum</td><td>sha1sum using <a href="https://pkg.go.dev/runtime#Caller"><code>runtime.Caller</code></a></td><td><code>89be88b670885d3d7855c7169ad7cfd2816a6c37</code></td></tr>
<tr><td>cacheChecksum</td><td>sh1sum of given <a href="https://pkg.go.dev/github.com/rsteube/carapace/pkg/cache#CacheKey"><code>CacheKeys</code></a></td><td><code>041858daaaa8b084122d4604a3223315c39edc3e</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="export"><a class="header" href="#export">Export</a></h1>
<p><a href="https://pkg.go.dev/github.com/rsteube/carapace/internal/export#Export"><code>Export</code></a> provides a <code>json</code> representation of an <a href="carapace/./invokedAction.html">InvokedAction</a>.
It is used to exchange completions between commands with <a href="carapace/./defaultActions/actionImport.html">ActionImport</a> as well as for <a href="carapace/./cache.html">Cache</a>.</p>
<pre><code class="language-go">type Export struct {
	Version  string   `json:&quot;version&quot;`
	Messages []string `json:&quot;messages&quot;`
	Nospace  string   `json:&quot;nospace&quot;`
	Usage    string   `json:&quot;usage&quot;`
	Values   []struct {
		Value       string `json:&quot;value&quot;`
		Display     string `json:&quot;display&quot;`
		Description string `json:&quot;description,omitempty&quot;`
		Style       string `json:&quot;style,omitempty&quot;`
		Tag         string `json:&quot;tag,omitempty&quot;`
	} `json:&quot;values&quot;`
}
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody>
<tr><td>Version</td><td>version of <code>carapace</code> being used</td></tr>
<tr><td>Messages</td><td>list of error messages</td></tr>
<tr><td>Nospace</td><td>character suffixes that prevent space suffix (<code>*</code> matches all)</td></tr>
<tr><td>Usage</td><td>usage message</td></tr>
<tr><td>Values</td><td>list of completion values</td></tr>
<tr><td>-</td><td></td></tr>
<tr><td>Value</td><td>value to insert</td></tr>
<tr><td>Display</td><td>value to display during completion</td></tr>
<tr><td>Description</td><td>description of the value</td></tr>
<tr><td>Style</td><td>style of the value</td></tr>
<tr><td>Tag</td><td>tag of the value</td></tr>
</tbody></table>
</div>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<pre><code class="language-sh">example _carapace export example m&lt;TAB&gt;
</code></pre>
<pre><code class="language-json">{
  &quot;version&quot;: &quot;unknown&quot;,
  &quot;messages&quot;: [],
  &quot;nospace&quot;: &quot;&quot;,
  &quot;usage&quot;: &quot;&quot;,
  &quot;values&quot;: [
    {
      &quot;value&quot;: &quot;modifier&quot;,
      &quot;display&quot;: &quot;modifier&quot;,
      &quot;description&quot;: &quot;modifier example&quot;,
      &quot;style&quot;: &quot;yellow&quot;,
      &quot;tag&quot;: &quot;modifier commands&quot;
    },
    {
      &quot;value&quot;: &quot;multiparts&quot;,
      &quot;display&quot;: &quot;multiparts&quot;,
      &quot;description&quot;: &quot;multiparts example&quot;,
      &quot;tag&quot;: &quot;other commands&quot;
    }
  ]
}
</code></pre>
<p><img src="carapace/./export.cast" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="standalone"><a class="header" href="#standalone">Standalone</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="caraparse"><a class="header" href="#caraparse">caraparse</a></h1>
<p><a href="https://github.com/rsteube/carapace-bin/tree/master/cmd/caraparse">caraparse</a> is a helper tool that uses regex to parse gnu help pages. Due to strong inconsistencies between these the results may differ but generally give a good head start.</p>
<pre><code class="language-sh">docker node update --help | caraparse -n update -p node -s &quot;Update a node&quot;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pflag"><a class="header" href="#pflag">pflag</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="development"><a class="header" href="#development">development</a></h1>
<blockquote>
<p>WIP</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="additional-information"><a class="header" href="#additional-information">Additional Information</a></h1>
<p>Additional information can be found at:</p>
<ul>
<li>Bash: <a href="https://iridakos.com/programming/2018/03/01/bash-programmable-completion-tutorial">bash-programmable-completion-tutorial</a> and <a href="https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion-Builtins.html#Programmable-Completion-Builtins">Programmable-Completion-Builtins</a></li>
<li>Elvish: <a href="https://zzamboni.org/post/using-and-writing-completions-in-elvish/">using-and-writing-completions-in-elvish</a> and <a href="https://elv.sh/ref/edit.html#argument-completer">argument-completer</a></li>
<li>Fish: <a href="https://github.com/fish-shell/fish-shell/tree/master/share/functions">fish-shell/share/functions</a> and <a href="https://fishshell.com/docs/current/#writing-your-own-completions">writing your own completions</a></li>
<li>Powershell: <a href="https://adamtheautomator.com/powershell-parameters-argumentcompleter/">Dynamic Tab Completion</a> and <a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/register-argumentcompleter">Register-ArgumentCompleter</a></li>
<li>Tcsh: <a href="https://www.ibm.com/docs/en/zos/2.3.0?topic=shell-complete-built-in-command-tcsh-list-completions">complete built-in command for tcsh</a></li>
<li>Xonsh: <a href="https://xon.sh/tutorial_completers.html">Programmable Tab-Completion</a> and <a href="https://github.com/xonsh/xonsh/blob/master/xonsh/completers/tools.py">RichCompletion(str)</a></li>
<li>Zsh: <a href="https://github.com/zsh-users/zsh-completions/blob/master/zsh-completions-howto.org#functions-for-performing-complex-completions-of-single-words">zsh-completions-howto</a> and <a href="http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Completion-System">Completion-System</a>.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="shells"><a class="header" href="#shells">Shells</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bash"><a class="header" href="#bash">Bash</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''\'''</code> <code>&quot;\&quot;&quot;</code></td></tr>
<tr><td>escape characer</td><td><code>\</code></td></tr>
<tr><td>output capture</td><td><code>$()</code> `` <code>&lt;()</code></td></tr>
<tr><td>line continuation</td><td><code>\</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="elvish"><a class="header" href="#elvish">Elvish</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''''</code> <code>&quot;\&quot;&quot;</code></td></tr>
<tr><td>escape characer</td><td>none</td></tr>
<tr><td>output capture</td><td><code>()</code></td></tr>
<tr><td>line continuation</td><td><code>^</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="fish"><a class="header" href="#fish">Fish</a></h1>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>strings</td><td><code>''</code> <code>&quot;&quot;</code></td></tr>
<tr><td>escape characer</td><td><code>\</code></td></tr>
<tr><td>output capture</td><td><code>()</code></td></tr>
<tr><td>line continuation</td><td><code>\</code></td></tr>
<tr><td>brace expansion</td><td><code>{}</code></td></tr>
<tr><td>redirection</td><td><code>&lt;</code> <code>&gt;</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ion"><a class="header" href="#ion">Ion</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nushell"><a class="header" href="#nushell">Nushell</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oil"><a class="header" href="#oil">Oil</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="powershell"><a class="header" href="#powershell">Powershell</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tcsh"><a class="header" href="#tcsh">Tcsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="xonsh"><a class="header" href="#xonsh">Xonsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zsh"><a class="header" href="#zsh">Zsh</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p>Since callbacks are simply invocations of the program they can be tested directly.</p>
<pre><code class="language-sh">example _carapace bash example condition --required ''
valid
invalid

example _carapace elvish example condition --required ''
[{&quot;Value&quot;:&quot;valid&quot;,&quot;Display&quot;:&quot;valid&quot;},{&quot;Value&quot;:&quot;invalid&quot;,&quot;Display&quot;:&quot;invalid&quot;}]

example _carapace fish example condition --required ''
valid
invalid

example _carapace powershell example condition --required ''
[{&quot;CompletionText&quot;:&quot;valid&quot;,&quot;ListItemText&quot;:&quot;valid&quot;,&quot;ToolTip&quot;:&quot; &quot;},{&quot;CompletionText&quot;:&quot;invalid&quot;,&quot;ListItemText&quot;:&quot;invalid&quot;,&quot;ToolTip&quot;:&quot; &quot;}]

example _carapace xonsh example condition --required ''
[{&quot;Value&quot;:&quot;valid&quot;,&quot;Display&quot;:&quot;valid&quot;,&quot;Description&quot;:&quot;&quot;},{&quot;Value&quot;:&quot;invalid&quot;,&quot;Display&quot;:&quot;invalid&quot;,&quot;Description&quot;:&quot;&quot;}]

example _carapace zsh example condition --required ''
valid   valid
invalid invalid
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asciinema"><a class="header" href="#asciinema">Asciinema</a></h1>
<p>Asciicasts are recorded within a resized tmux window for consistency.</p>
<pre><code class="language-sh">tmux
tmux resize-window -x 108 -y 24
</code></pre>
<p>They can be embedded using the image syntax.</p>
<pre><code class="language-md">![](./recording.cast)
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="asciinema/asciinema-player.min.js"></script>
        <script type="text/javascript" src="asciinema/load.js"></script>

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
